<% provide :page, 'User Profile' %>

<div class="profile jumbotron text-center">
  <%= round_avatar_tag @user, class: 'round-avatar mb-3' %>

  <h1 class="display-4">
    <%= @user.name %>
  </h1>
  <hr >
    <p>
      <% if @user.summary.present? %>
        <%= @user.summary %>
      <% else %>
        An Odinbook member.
      <% end %>
    </p>
    <div class="d-flex justify-content-center">
      <%= link_to user_friends_path(@user), class: "text-reset m-1 btn btn-secondary" do %>
        <span class="text-white">
          <%= pluralize(@user.friends.count, 'friend') %>
        </span>
      <% end %>
      <%= render "manage_relationship" %>
    </div>
  <% if @user == current_user %>
    <div class="d-flex justify-content-center">
      <%= link_to edit_user_path(@user), class: "text-reset mx-1 btn btn-secondary" do %>
        <span class="text-white">
          <%= fa_icon "edit" %> profile
        </span>
      <% end %>
      <% if @user.avatar.attached? %>
        <%= link_to destroy_avatar_attached_to_user_path(@user), method: :delete, class: "text-reset mx-1 btn btn-danger" do %>
          <span class="text-white">
            <%= fa_icon "trash" %> avatar
          </span>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
<% if @user == current_user %>
  <%= form_with(model: @post, local: true, class: 'text-center card p-3 mb-3') do |f| %>
    <div class="form-group card-body p-1">
      <%= f.label :content, "Share a post" %>
      <%= render 'devise/shared/error_messages', resource: @post %>
      <%= f.text_area :content, class: 'form-control' %>
    </div>

    <%= f.submit 'Post', class: 'btn btn-info' %>
  <% end %>
<% end %>
<h3>
  Posts
</h3>
<%= render @posts %>
